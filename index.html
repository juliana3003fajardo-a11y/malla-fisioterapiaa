<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Malla Curricular Fisioterapia UAM</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #f5f9f7;
      margin: 0;
      padding: 20px;
      color: #333;
    }
    h1 {
      text-align: center;
      color: #3a6b68;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(10, 1fr);
      gap: 15px;
      margin-top: 30px;
    }
    .semestre {
      background-color: #e3f2ef;
      border-radius: 10px;
      padding: 10px;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    }
    .semestre h2 {
      text-align: center;
      font-size: 16px;
      color: #2e4f4d;
    }
    .materia {
      margin: 8px 0;
      padding: 6px;
      background-color: #fff;
      border-radius: 6px;
      cursor: pointer;
      position: relative;
      transition: background-color 0.3s;
    }
    .materia:hover {
      background-color: #d6edea;
    }
    .materia.aprobada {
      background-color: #a8d5ba !important;
      text-decoration: line-through;
    }
    .materia.bloqueada {
      background-color: #f0dada;
      cursor: not-allowed;
    }
    .materia.bloqueada:hover::after {
      content: attr(data-tooltip);
      position: absolute;
      left: 100%;
      top: 50%;
      transform: translateY(-50%);
      background-color: #444;
      color: white;
      padding: 5px;
      border-radius: 4px;
      white-space: nowrap;
      z-index: 10;
      margin-left: 10px;
      font-size: 12px;
    }
  </style>
</head>
<body>
  <h1>Malla Curricular Fisioterapia - UAM</h1>
  <div class="grid" id="malla"></div>
  <script>
    const materias = {
      'Primer semestre': [
        'Morfología',
        'Biología celular y molecular I',
        'Biofísica',
        'Salud y contexto',
        'Cuerpo y movimiento I',
        'Psicología en salud',
        'Cultura política',
        'Ingles I'
      ],
      'Segundo semestre': [
        ['Morfología II', ['Morfología']],
        ['Biología celular y molecular II', ['Biología celular y molecular I']],
        ['Promoción de la salud', ['Salud y contexto']],
        ['Cuerpo y movimiento II', ['Cuerpo y movimiento I']],
        'Emprendimiento',
        'Competencias comunicativas',
        ['Ingles II', ['Ingles I']]
      ],
      'Tercer semestre': [
        ['Fisiología', ['Morfología II', 'Biología celular y molecular II']],
        ['Neuro anatomía funcional y neurofisiologica', ['Morfología']],
        ['Biomecánica', ['Biofísica', 'Morfología']],
        ['Salud pública y epidemiología', ['Promoción de la salud']],
        ['Evaluación y diagnóstico I', ['Morfología II', 'Cuerpo y movimiento II']],
        ['Ingles III', ['Ingles II']]
      ],
      'Cuarto semestre': [
        ['Patologia general', ['Fisiología']],
        ['Actividad y ejercicio físico', ['Fisiología']],
        ['Planificación de la salud', ['Salud pública y epidemiología']],
        ['Evaluación y diagnóstico II', ['Evaluación y diagnóstico I', 'Fisiología', 'Neuro anatomía funcional y neurofisiologica']],
        'Filosofía de la ciencia',
        ['Clínica del movimiento humano I', ['Evaluación y diagnóstico I']],
        ['Ingles IV', ['Ingles III']]
      ],
      'Quinto semestre': [
        ['Farmacología', ['Patologia general']],
        ['Ejercicio terapéutico', ['Biomecánica', 'Evaluación y diagnóstico II']],
        ['Políticas públicas y seguridad social', ['Planificación de la salud']],
        ['Medios físicos', ['Patologia general']],
        ['Evaluación y diagnóstico III', ['Evaluación y diagnóstico II']],
        'Clínica del movimiento humano III',
        ['Ingles V', ['Ingles IV']]
      ],
      'Sexto semestre': [
        ['Técnicas manuales', ['Biomecánica']],
        ['Discapacidad y contexto', ['Evaluación y diagnóstico III']],
        'Curso libre I',
        'Curso libre II',
        ['Proceso de investigación I', ['Filosofía de la ciencia']],
        'Ética',
        ['Modalidades terapéuticas neuromusculares', ['Clínica del movimiento humano II']],
        ['Ingles VI', ['Ingles V']]
      ],
      'Séptimo semestre': [
        ['Práctica integral comunitaria', ['Actividad y ejercicio físico', 'Políticas públicas y seguridad social', 'Discapacidad y contexto']],
        ['Tecnologías de asistencia', ['Clínica del movimiento humano II', 'Ejercicio terapéutico']],
        'Curso libre III',
        ['Proceso de investigación II', ['Proceso de investigación I']],
        ['Modalidades terapéuticas cardiopulmonares', ['Farmacología', 'Clínica del movimiento humano II']]
      ],
      'Octavo semestre': [
        ['Seguridad y salud en el trabajo', ['Clínica del movimiento humano I', 'Medios físicos', 'Evaluación y diagnóstico III', 'Técnicas manuales', 'Modalidades terapéuticas neuromusculares', 'Práctica integral comunitaria', 'Tecnologías de asistencia', 'Modalidades terapéuticas cardiopulmonares']],
        ['Práctica I', ['Clínica del movimiento humano I', 'Medios físicos', 'Evaluación y diagnóstico III', 'Técnicas manuales', 'Modalidades terapéuticas neuromusculares', 'Práctica integral comunitaria', 'Tecnologías de asistencia', 'Modalidades terapéuticas cardiopulmonares']],
        ['Práctica II', ['Clínica del movimiento humano I', 'Medios físicos', 'Evaluación y diagnóstico III', 'Técnicas manuales', 'Modalidades terapéuticas neuromusculares', 'Práctica integral comunitaria', 'Tecnologías de asistencia', 'Modalidades terapéuticas cardiopulmonares']],
        ['Práctica III', ['Clínica del movimiento humano I', 'Medios físicos', 'Evaluación y diagnóstico III', 'Técnicas manuales', 'Modalidades terapéuticas neuromusculares', 'Práctica integral comunitaria', 'Tecnologías de asistencia', 'Modalidades terapéuticas cardiopulmonares']],
        ['Práctica IV', ['Clínica del movimiento humano I', 'Medios físicos', 'Evaluación y diagnóstico III', 'Técnicas manuales', 'Modalidades terapéuticas neuromusculares', 'Práctica integral comunitaria', 'Tecnologías de asistencia', 'Modalidades terapéuticas cardiopulmonares']]
      ],
      'Noveno semestre': [
        ['Administración en salud', ['Clínica del movimiento humano I', 'Medios físicos', 'Evaluación y diagnóstico III', 'Técnicas manuales', 'Modalidades terapéuticas neuromusculares', 'Práctica integral comunitaria', 'Tecnologías de asistencia', 'Modalidades terapéuticas cardiopulmonares']],
        ['Práctica V', ['Práctica I']],
        ['Práctica VI', ['Práctica II']],
        ['Práctica VII', ['Clínica del movimiento humano I', 'Medios físicos', 'Evaluación y diagnóstico III', 'Técnicas manuales', 'Modalidades terapéuticas neuromusculares', 'Práctica integral comunitaria', 'Tecnologías de asistencia', 'Modalidades terapéuticas cardiopulmonares']],
        ['Práctica VIII', ['Clínica del movimiento humano I', 'Medios físicos', 'Evaluación y diagnóstico III', 'Técnicas manuales', 'Modalidades terapéuticas neuromusculares', 'Práctica integral comunitaria', 'Tecnologías de asistencia', 'Modalidades terapéuticas cardiopulmonares']]
      ],
      'Décimo semestre': [
        ['Paz y competitividad', ['Seguridad y salud en el trabajo', 'Práctica I', 'Práctica II', 'Práctica III', 'Práctica IV', 'Práctica V', 'Práctica VI', 'Práctica VII', 'Práctica VIII', 'Administración en salud']],
        'Desarrollo sostenible',
        'Curso libre IV'
      ]
    };

    const aprobadas = new Set(JSON.parse(localStorage.getItem('materiasAprobadas') || '[]'));

    function save() {
      localStorage.setItem('materiasAprobadas', JSON.stringify([...aprobadas]));
    }

    function crearMalla() {
      const container = document.getElementById('malla');
      container.innerHTML = '';
      Object.entries(materias).forEach(([semestre, lista]) => {
        const col = document.createElement('div');
        col.className = 'semestre';
        const title = document.createElement('h2');
        title.textContent = semestre;
        col.appendChild(title);

        lista.forEach(m => {
          const nombre = typeof m === 'string' ? m : m[0];
          const requisitos = typeof m === 'string' ? [] : m[1];
          const div = document.createElement('div');
          div.className = 'materia';
          div.textContent = nombre;

          const faltantes = requisitos.filter(req => !aprobadas.has(req));
          if (faltantes.length > 0) {
            div.classList.add('bloqueada');
            div.dataset.tooltip = 'Faltan: ' + faltantes.join(', ');
          } else {
            div.addEventListener('click', () => {
              if (aprobadas.has(nombre)) {
                aprobadas.delete(nombre);
              } else {
                aprobadas.add(nombre);
              }
              save();
              crearMalla();
            });
          }

          if (aprobadas.has(nombre)) {
            div.classList.add('aprobada');
          }

          col.appendChild(div);
        });
        container.appendChild(col);
      });
    }

    crearMalla();
  </script>
</body>
</html>
